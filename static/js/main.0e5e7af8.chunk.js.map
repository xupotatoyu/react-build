{"version":3,"sources":["containters lazy /^/.*/.js$/ groupOptions: {} namespace object","serviceWorker.js","router/router.js","utils/utils.js","components/Header2/Header.js","App.js","redux/reducers/app.js","redux/actions/actionTypes.js","redux/reducers/index.js","redux/store.js","index.js"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","all","slice","keys","Object","module","exports","Boolean","window","location","hostname","match","loadComponent","component","Loadable","loader","loading","routes","path","exact","title","RouteWithSubRoutes","route","render","props","Nav","handleClick","console","log","setState","current","key","state","onClick","this","selectedKeys","mode","Item","icon","AppstoreOutlined","to","React","Component","Header","userName","userState","nextProps","className","src","style","marginLeft","quitModal","UserOutlined","changeModal","App","getInputValue","event","target","value","username","password","showModal","visible","quitVisible","fetchPost","url","params","self","fetch","body","JSON","stringify","headers","method","response","json","res","errno","success","localStorage","setItem","getItem","error","catch","fetchQuit","removeItem","handleLoginOk","data","handleQuitOk","handleCancel","pushSign","history","push","reload","onOk","onCancel","height","display","flexDirection","justifyContent","ref","label","name","rules","required","message","placeholder","onChange","prefix","suffix","InfoCircleOutlined","color","Password","LockOutlined","cursor","textAlign","i","from","app","action","type","playLoad","combineReducers","createStore","rootReducer","createHistory","ReactDOM","store","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.0e5e7af8.chunk.js","sourcesContent":["var map = {\n\t\"./Detail/Detail.js\": [\n\t\t420,\n\t\t2,\n\t\t9\n\t],\n\t\"./Edit/Edit.js\": [\n\t\t421,\n\t\t0,\n\t\t10\n\t],\n\t\"./Main/Main.js\": [\n\t\t422,\n\t\t1,\n\t\t2,\n\t\t7,\n\t\t8\n\t],\n\t\"./Manage/Manage.js\": [\n\t\t423,\n\t\t1,\n\t\t5,\n\t\t11\n\t],\n\t\"./Sign/Sign.js\": [\n\t\t424,\n\t\t12\n\t],\n\t\"./Write/Write.js\": [\n\t\t425,\n\t\t0,\n\t\t13\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 212;\nmodule.exports = webpackAsyncContext;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import Loadable from 'react-loadable';\r\n\r\nconst loadComponent = (component) => {\r\n  return Loadable({\r\n    loader: () => import(`../containters/${component}/${component}.js`),\r\n    loading: () => null\r\n  })\r\n}\r\n\r\nconst routes = [\r\n  {\r\n    path: '/main',\r\n    component: loadComponent('Main'),\r\n    exact: true,\r\n\t\ttitle: '主页'\r\n  },\r\n  {\r\n    path: '/sign',\r\n    component: loadComponent('Sign'),\r\n    exact: true,\r\n\t\ttitle: '登录'\r\n  },\r\n  {\r\n    path: '/manage',\r\n    component: loadComponent('Manage'),\r\n    exact: true,\r\n\t\ttitle: '用户管理界面'\r\n  },\r\n  {\r\n    path: '/write',\r\n    component: loadComponent('Write'),\r\n    exact: true,\r\n\t\ttitle: '写博客'\r\n  },\r\n  {\r\n    path: '/edit/:id',\r\n    component: loadComponent('Edit'),\r\n    exact: true,\r\n\t\ttitle: '修改博客'\r\n  },\r\n  {\r\n    path: '/detail/:id',\r\n    component: loadComponent('Detail'),\r\n    exact: true,\r\n\t\ttitle: '文章页面'\r\n  },\r\n]\r\n\r\nexport default routes;","import React from 'react';\r\nimport { Route } from 'react-router-dom';\r\n\r\nexport const RouteWithSubRoutes = (route) => (\r\n\t<Route path={route.path} exact={route.exact } render={props => (\r\n\t\t<route.component {...props} routes={route.routes} title={route.title}/>\r\n\t)}/>\r\n)","import React from 'react';\r\nimport {  Menu  } from 'antd';\r\nimport {   AppstoreOutlined  } from '@ant-design/icons';\r\nimport { Avatar } from 'antd';\r\nimport { UserOutlined } from '@ant-design/icons';\r\nimport './Header.less';\r\nimport {Link} from 'react-router-dom';\r\n\r\nclass Nav extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      current: 'mail',\r\n      \r\n    }\r\n  }\r\n\r\n  handleClick = e => {\r\n    console.log('click ', e);\r\n    this.setState({\r\n      current: e.key,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <Menu onClick={this.handleClick} selectedKeys={[this.state.current]} mode=\"horizontal\">\r\n        <Menu.Item key=\"main\"  icon={<AppstoreOutlined />}>\r\n          <Link to=\"/main\">博客</Link>\r\n        </Menu.Item>\r\n        <Menu.Item key=\"manage\">\r\n          <Link to=\"/manage\">管理中心</Link>\r\n        </Menu.Item>\r\n        <Menu.Item key=\"write\">\r\n          <Link to=\"/write\">写博客</Link>\r\n        </Menu.Item>\r\n      </Menu>\r\n    );\r\n  }\r\n}\r\n\r\nclass Header extends  React.Component{\r\n  constructor(props){\r\n    super(props)\r\n    this.state={\r\n      userName:'',\r\n      userState: false\r\n    }\r\n  }\r\n  componentDidMount(){\r\n    this.setState({\r\n      userName: this.props.userName\r\n    })\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps){\r\n    this.setState({\r\n      userName: nextProps.userName\r\n    })\r\n }\r\n \r\n  render() {\r\n    return(\r\n      <div className=\"header\">\r\n        <div className=\"header-title\"> 徐怀宇的博客</div>\r\n        <div className=\"header-right\">\r\n          <div className=\"header-nav\">\r\n            <Nav></Nav>\r\n          </div>\r\n          {this.state.userName ?\r\n          <div className=\"header-user\">\r\n          <Avatar src=\"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\" />\r\n          <span style={{marginLeft:'2px'}} onClick={this.props.quitModal}><b>{this.state.userName}</b></span>\r\n          </div>:<div className=\"header-user\">\r\n          <Avatar icon={<UserOutlined />} />\r\n          <span style={{marginLeft:'2px'}} onClick={this.props.changeModal}>请登录</span>\r\n          </div>}\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\nexport default Header;","import React from 'react';\nimport './App.less';\nimport { Redirect, Switch } from 'react-router-dom';\nimport routes from './router/router.js';\nimport { RouteWithSubRoutes } from './utils/utils';\nimport Header from './components/Header2/Header.js';\n// import Footer from './components/Footer/Footer';\nimport {message,Modal ,Form,Input,Tooltip } from 'antd';\nimport { InfoCircleOutlined, UserOutlined,LockOutlined } from '@ant-design/icons';\n\n\nclass App extends React.Component {\n  constructor(props){\n    super(props)\n    this.state = { \n      visible: false,\n      quitVisible: false,\n      username:'',\n      password:'',\n      userName:''\n    };\n  }\n  componentWillMount(){\n    if(window.localStorage.getItem('userName')){\n      this.setState({\n        userName: window.localStorage.getItem('userName')\n      })\n    }\n  }\n\n  getInputValue=(key,event)=>{\n    if(event && event.target && event.target.value){\n        let value = event.target.value;\n        if(key==='username'){\n          this.setState({\n            username:value\n          })\n        }else {\n          this.setState({\n            password:value\n          })\n        }\n    }\n  }\n  // 登录modal出现\n  showModal = () => {\n    this.setState({\n      visible: true,\n    });\n  };\n  // 退出modal出现\n  quitModal = ()=>{\n    this.setState({\n      quitVisible: true,\n    });\n  };\n\n  // 登录请求\n  fetchPost=(url,params)=>{\n    let self = this\n    fetch(url, {\n      body: JSON.stringify(params),\n      headers: {\n        'content-type': 'application/json'\n      },\n      method: 'POST'\n    }).then(response=>{\n      return response.json()\n    }).then(res=>{\n      if(res.errno === 0){\n        message.success('登录成功')\n        this.setState({\n          visible: false,\n        });\n        window.localStorage.setItem('userName',this.state.username)\n        self.setState({\n          userName: window.localStorage.getItem('userName')\n        })\n        // window.location.reload()\n      }else{\n        message.error('密码或者用户名错误')\n      }\n    }).catch(error => console.error(error))\n  }\n  // 退出请求\n  fetchQuit=(url)=>{\n    let self = this\n    fetch(url, {\n      body: '',\n      headers: {\n        'content-type': 'application/json'\n      },\n      method: 'POST'\n    }).then(response=>{\n      return response.json()\n    }).then(res=>{\n      if(res.errno === 0){\n        message.success('登出成功')\n        window.localStorage.removeItem('userName')\n        this.setState({\n          quitVisible: false,\n        });\n        self.setState({\n          userName: ''\n        })\n        // window.location.reload()\n      }else{\n        message.error('退出失败')\n      }\n    }).catch(error => console.error(error))\n  }\n\n  // 确定登录\n  handleLoginOk = e => {\n    console.log(e);\n    const url = '/api/user/login'\n    const data = {\n          username:this.state.username,\n          password:this.state.password\n          }\n    this.fetchPost(url,data)\n  };\n  // 确定注销\n  handleQuitOk = e => {\n    const url = '/api/user/quit'\n    this.fetchQuit(url)\n  }\n  // Model 取消\n  handleCancel = e => {\n    console.log(e);\n    this.setState({\n      visible: false,\n      quitVisible: false\n    });\n  };\n\n  pushSign=()=>{\n    this.props.history.push(`/sign`)\n    window.location.reload()\n    // window.reload()\n    this.setState({\n      visible: false\n    })\n  }\n  render() {\n\n    return(\n      <div className=\"app\">\n        <Header {...this.props} changeModal={this.showModal} quitModal={this.quitModal} userName={this.state.userName}/>\n        <Modal\n          title=\"登录\"\n          visible={this.state.visible}\n          onOk={this.handleLoginOk}\n          onCancel={this.handleCancel}\n        >\n          <div style={{height:'150px',display:'flex',flexDirection:'column',justifyContent:'space-around'}}>\n            <Form ref=\"getFormVlaue\">\n              <Form.Item\n              label=\"Username\"\n              name=\"username\"\n              rules={[{ required: true, message: 'Please input your username!' }]}\n              >\n                <Input\n                  placeholder=\"Enter your username\"\n                  onChange={event=>this.getInputValue('username',event)}\n                  prefix={<UserOutlined className=\"site-form-item-icon\" />}\n                  suffix={\n                    <Tooltip title=\"Extra information\">\n                      <InfoCircleOutlined style={{ color: 'rgba(0,0,0,.45)' }} />\n                    </Tooltip>\n                  }\n                />\n              </Form.Item>\n              <Form.Item\n              label=\"Password\"\n              name=\"password\"\n              rules={[{ required: true, message: 'Please input your password!' }]}\n              >\n                <Input.Password \n                  onChange={event=>this.getInputValue('password',event)}\n                  prefix={<LockOutlined  style={{ color: 'rgba(0,0,0,.45)' }} />}\n                  placeholder=\"input password\" />\n              </Form.Item>\n            </Form>\n          </div>\n          <span style={{color:'red',cursor:'default'}} onClick={this.pushSign}>没有账户？点击注册账户</span>\n        </Modal>\n        <Modal\n          title=\"注销\"\n          visible={this.state.quitVisible}\n          onOk={this.handleQuitOk}\n          onCancel={this.handleCancel}\n        >\n         <div style={{textAlign:'center'}}><h1>确定退出登录？</h1></div>\n        </Modal>\n          <div className=\"contain\">\n            <Switch>\n              {routes.map((route, i) => (\n                  <RouteWithSubRoutes key={i} {...route} />\n                ))}\n                <Redirect from=\"\" to='/main' />\n            </Switch>\n          </div>\n      </div>\n    )\n  }\n}\n\nexport default App;\n","import { CHANGE_TITLE } from '../actions/actionTypes.js'\r\n\r\nconst app = (state = {title:'位号',name:'这是state'}, action) => {\r\n  switch (action.type) {\r\n    case CHANGE_TITLE: {\r\n      return {\r\n        ...state,\r\n        title: action.playLoad\r\n      }\r\n    }\r\n    default:\r\n\t\t\treturn state;\r\n  }\r\n}\r\n\r\nexport default app;","export const CHANGE_TITLE = 'CHANGE_TITLE';","import { combineReducers } from 'redux';\r\nimport app from './app.js';\r\n\r\nexport default combineReducers({ app });","import { createStore } from 'redux';\r\nimport rootReducer from './reducers';\r\n\r\nexport default  createStore(rootReducer);","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.less';\nimport * as serviceWorker from './serviceWorker';\nimport { BrowserRouter  } from 'react-router-dom'\nimport App from './App';\nimport createHistory from 'history/createBrowserHistory';\nimport { Provider } from 'react-redux';\nimport store from './redux/store.js';\n\nconst history = createHistory();\n\nReactDOM.render(\n  <Provider store={store}>\n  <BrowserRouter history={history} >\n    <App history={history} />\n  </BrowserRouter>\n  </Provider>,\n  document.getElementById('root')\n);\n\nserviceWorker.unregister();\n"],"sourceRoot":""}