{"version":3,"sources":["containters/Manage/Manage.js"],"names":["Manage","props","fetchGet","url","self","fetch","then","response","json","myJson","setState","data","fetchPost","params","body","JSON","stringify","headers","method","res","errno","success","error","catch","console","changeBlog","id","log","history","push","delBlog","state","categoryOp","title","top","left","text","tooltip","visualMap","show","min","max","calendar","right","cellSize","range","itemStyle","borderWidth","yearLabel","series","type","coordinateSystem","shanOp","trigger","formatter","name","selectedMode","radius","label","position","labelLine","value","selected","backgroundColor","borderColor","borderRadius","rich","a","color","lineHeight","align","hr","width","height","b","fontSize","per","padding","window","localStorage","getItem","this","className","style","itemLayout","dataSource","renderItem","item","Item","actions","onClick","Meta","avatar","src","href","option","React","Component"],"mappings":"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","file":"static/js/11.ddc0165b.chunk.js","sourcesContent":["import React from 'react';\r\nimport './Manage.less';\r\nimport { List, Avatar,message } from 'antd';\r\nimport ReactEcharts from 'echarts-for-react';\r\n\r\n// const data = [\r\n//   {\r\n//     title: 'Ant Design Title 1',\r\n//   },\r\n//   {\r\n//     title: 'Ant Design Title 2',\r\n//   },\r\n//   {\r\n//     title: 'Ant Design Title 3',\r\n//   },\r\n//   {\r\n//     title: 'Ant Design Title 4',\r\n//   },\r\n// ];\r\n\r\n\r\nclass Manage extends React.Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state={\r\n      categoryOp :  {\r\n        title: {\r\n            top: 30,\r\n            left: 'center',\r\n            text: 'data'\r\n        },\r\n        tooltip: {},\r\n        visualMap: {\r\n          show: false,\r\n          min: 0,\r\n          max: 50\r\n        },\r\n        calendar: {\r\n            top: 120,\r\n            left: 30,\r\n            right: 30,\r\n            cellSize: ['auto', 13],\r\n            range: '2020',\r\n            itemStyle: {\r\n                borderWidth: 0.5\r\n            },\r\n            yearLabel: {show: false}\r\n        },\r\n        series: {\r\n            type: 'heatmap',\r\n            coordinateSystem: 'calendar',\r\n            data:  [[\"2020-05-14\", 20],[\"2020-05-15\", 25]]\r\n        }\r\n      },\r\n      shanOp :{\r\n        tooltip: {\r\n            trigger: 'item',\r\n            formatter: '{a} <br/>{b}: {c} ({d}%)'\r\n        },\r\n        // legend: {\r\n        //     orient: 'vertical',\r\n        //     left: 10,\r\n        //     top: 30,\r\n        //     data: ['直达', '营销广告', '搜索引擎', '邮件营销', '联盟广告', '视频广告', '百度', '谷歌', '必应', '其他']\r\n        // },\r\n        series: [\r\n            {\r\n                name: '访问来源',\r\n                type: 'pie',\r\n                selectedMode: 'single',\r\n                radius: [0, '30%'],\r\n    \r\n                label: {\r\n                    position: 'inner'\r\n                },\r\n                labelLine: {\r\n                    show: false\r\n                },\r\n                data: [\r\n                    {value: 335, name: '直达', selected: true},\r\n                    {value: 200, name: '其他'},\r\n                    {value: 1548, name: '搜索引擎'}\r\n                ]\r\n            },\r\n            {\r\n                name: '访问来源',\r\n                type: 'pie',\r\n                radius: ['40%', '55%'],\r\n                label: {\r\n                    formatter: '{a|{a}}{abg|}\\n{hr|}\\n  {b|{b}：}{c}  {per|{d}%}  ',\r\n                    backgroundColor: '#eee',\r\n                    borderColor: '#aaa',\r\n                    borderWidth: 1,\r\n                    borderRadius: 4,\r\n                    // shadowBlur:3,\r\n                    // shadowOffsetX: 2,\r\n                    // shadowOffsetY: 2,\r\n                    // shadowColor: '#999',\r\n                    // padding: [0, 7],\r\n                    rich: {\r\n                        a: {\r\n                            color: '#999',\r\n                            lineHeight: 22,\r\n                            align: 'center'\r\n                        },\r\n                        // abg: {\r\n                        //     backgroundColor: '#333',\r\n                        //     width: '100%',\r\n                        //     align: 'right',\r\n                        //     height: 22,\r\n                        //     borderRadius: [4, 4, 0, 0]\r\n                        // },\r\n                        hr: {\r\n                            borderColor: '#aaa',\r\n                            width: '100%',\r\n                            borderWidth: 0.5,\r\n                            height: 0\r\n                        },\r\n                        b: {\r\n                            fontSize: 16,\r\n                            lineHeight: 33\r\n                        },\r\n                        per: {\r\n                            color: '#eee',\r\n                            backgroundColor: '#334455',\r\n                            padding: [2, 4],\r\n                            borderRadius: 2\r\n                        }\r\n                    }\r\n                },\r\n                data: [\r\n                    {value: 335, name: '直达'},\r\n                    {value: 810, name: '百度'},\r\n                    {value: 200, name: '搜狐'},\r\n                    {value: 851, name: '谷歌'},\r\n                    {value: 147, name: '必应'},\r\n                    {value: 102, name: '其他'}\r\n                ]\r\n            }\r\n        ]\r\n      },\r\n      data:[]\r\n    }\r\n  }\r\n\r\n  // 获取用户博客列表\r\n  fetchGet = (url)=>{\r\n    let self =this\r\n    fetch(url)\r\n    .then(function(response) {\r\n      return response.json();\r\n    })\r\n    .then(function(myJson) {\r\n      self.setState({\r\n        data:myJson.data\r\n      })\r\n      // console.log('qqqq',self.state.data.data)\r\n    });\r\n  }\r\n  // 删除博客\r\n  fetchPost=(url,params)=>{\r\n    let self = this\r\n    fetch(url, {\r\n      body: JSON.stringify(params),\r\n      headers: {\r\n        'content-type': 'application/json'\r\n      },\r\n      method: 'POST'\r\n    }).then(response=>{\r\n      return response.json()\r\n    }).then(res=>{\r\n      if(res.errno === 0){\r\n        message.success('删除成功')\r\n        self.fetchGet('/api/blog/list?isadmin=1')\r\n      }else{\r\n        message.error('删除失败')\r\n      }\r\n    }).catch(error => console.error(error))\r\n  }\r\n\r\n  componentWillMount(){\r\n    if(!window.localStorage.getItem('userName')){\r\n      message.error('请先登录')\r\n      this.props.history.push('/main')\r\n    }else{\r\n      let url = '/api/blog/list?isadmin=1'\r\n      this.fetchGet(url)\r\n    }\r\n  }\r\n\r\n  changeBlog=(id)=>{\r\n    console.log('点击了')\r\n    this.props.history.push(`/edit/${id}`)\r\n  }\r\n  delBlog=(id)=>{\r\n    let url = '/api/blog/del?id='+id\r\n    this.fetchPost(url)\r\n  }\r\n  render() {\r\n\r\n    return(\r\n      <div className=\"manage\" style={{padding:'30px'}}>\r\n        <div className=\"manage-content\">\r\n          <div className=\"manage-content-left\">\r\n            <List\r\n              itemLayout=\"horizontal\"\r\n              dataSource={this.state.data}\r\n              renderItem={item => (\r\n                <List.Item\r\n                  actions={[<div onClick={()=>this.changeBlog(item.id)}>修改</div>, <div onClick={()=>this.delBlog(item.id)}>删除</div>]}\r\n                >\r\n                  <List.Item.Meta\r\n                    avatar={<Avatar src=\"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\" />}\r\n                    title={<a href=\"https://ant.design\">{item.title}</a>}\r\n                    // description=\"Ant Design, a design language for background applications, is refined by Ant UED Team\"\r\n                  />\r\n                </List.Item>\r\n              )}\r\n            />\r\n          </div>\r\n          {/* <div className=\"manage-content-right\">\r\n            <ReactEcharts\r\n              option={this.state.shanOp}\r\n              // style={{height: '100%', width: '100%'}}\r\n            />\r\n          </div> */}\r\n        </div>\r\n        <div className=\"manage-chart\">\r\n          <div className=\"manage-chart-content\">\r\n          <ReactEcharts\r\n              option={this.state.categoryOp}\r\n              style={{height: '300px', width: '50%'}}\r\n              />\r\n          <ReactEcharts\r\n              option={this.state.shanOp}\r\n              style={{height: '300px', width: '50%'}}\r\n            />\r\n          </div> \r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Manage;\r\n"],"sourceRoot":""}