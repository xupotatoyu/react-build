(this["webpackJsonpreact-blog"]=this["webpackJsonpreact-blog"]||[]).push([[10],{421:function(t,e,a){"use strict";a.r(e),a.d(e,"default",(function(){return E}));a(131);var n=a(91),r=a.n(n),o=(a(181),a(95)),i=a.n(o),c=a(600),s=a.n(c),u=a(601),l=(a(179),a(60)),h=a.n(l),p=a(52),d=a(53),f=a(54),m=a(57),v=a(56),g=a(0),b=a.n(g),y=a(602),S=a.n(y),E=(a(631),a(834),function(t){Object(m.a)(a,t);var e=Object(v.a)(a);function a(t){var n;return Object(p.a)(this,a),(n=e.call(this,t)).getInputValue=function(t){if(t&&t.target&&t.target.value){var e=t.target.value;n.setState({title:e})}},n.fetchGet=function(t){var e=Object(f.a)(n);fetch(t).then((function(t){return t.json()})).then((function(t){e.setState({data:t.data,editorState:S.a.createEditorState(t.data.content),title:t.data.title})}))},n.fetchPost=function(t,e){var a=Object(f.a)(n);fetch(t,{body:JSON.stringify(e),headers:{"content-type":"application/json"},method:"POST"}).then((function(t){return t.json()})).then((function(t){0===t.errno?(h.a.success("\u4fee\u6539\u6210\u529f",2),a.props.history.push("/manage")):h.a.error("\u4fdd\u5b58\u5931\u8d25")})).catch((function(t){return console.error(t)}))},n.submitContent=function(){var t=n.state.editorState.toHTML(),e="/api/blog/update?id="+n.props.match.params.id,a={title:n.state.title,content:t};n.fetchPost(e,a),console.log("\u63d0\u4ea4")},n.saveContent=function(){n.getInputValue(),console.log("\u4fdd\u5b58")},n.handleEditorChange=function(t){n.setState({editorState:t})},n.state={editorState:S.a.createEditorState(null),title:"",data:{}},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var t=Object(u.a)(s.a.mark((function t(){var e;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e="/api/blog/detail?id="+this.props.match.params.id,this.fetchGet(e);case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){window.localStorage.getItem("userName")||(h.a.error("\u8bf7\u5148\u767b\u5f55"),window.history.back())}},{key:"render",value:function(){var t=this,e=this.state.editorState;return b.a.createElement("div",{style:{margin:"30px"}},b.a.createElement("div",{className:"write-title"},b.a.createElement(i.a,{placeholder:"\u6807\u9898",onChange:function(e){return t.getInputValue(e)},value:this.state.title})),b.a.createElement("div",{className:"write-content"},b.a.createElement(S.a,{value:e,onChange:this.handleEditorChange,onSave:this.saveContent})),b.a.createElement("div",{className:"edit-button"},b.a.createElement(r.a,{type:"primary",onClick:this.saveContent},"\u4fdd\u5b58"),b.a.createElement("span",{className:"wspan"}),b.a.createElement(r.a,{type:"primary",onClick:this.submitContent},"\u63d0\u4ea4")))}}]),a}(b.a.Component))},834:function(t,e,a){}}]);
//# sourceMappingURL=10.7bab6b9c.chunk.js.map